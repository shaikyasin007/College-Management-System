<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Create Campus Hero Image</title>
  <link rel="stylesheet" href="styles.css" />
  <style>
    body{padding:24px}
    .panel{background:#0f1730;border:1px solid #1a2444;border-radius:12px;padding:16px}
    .grid{display:grid;grid-template-columns:1.2fr .8fr;gap:18px;margin-top:18px}
    label{display:block;margin:8px 0 4px;color:#cfd5ff}
    input[type="text"],input[type="range"]{width:100%;background:#0c132b;border:1px solid #1a2444;border-radius:10px;color:#e7e9f3;padding:10px}
    canvas{width:100%;max-width:100%;background:#111;border-radius:12px}
    .row{display:flex;gap:10px;flex-wrap:wrap}
    .note{color:#c0c0c0}
  </style>
</head>
<body>
  <a class="btn btn-ghost" href="index.html">← Back to site</a>
  <h1>Create Campus Hero Image</h1>
  <p class="note">Paste a campus photo URL (or use default), tune blur/brightness, and export a ~2000×1200 JPG. Save as <code>assets/campus.jpg</code>.</p>

  <div class="grid">
    <div class="panel">
      <label for="src">Image URL</label>
      <input id="src" type="text" value="https://cdn.pixabay.com/photo/2016/01/05/11/36/architecture-1122359_1280.jpg" />
      <div class="row">
        <label class="note">or upload a local image:</label>
        <input id="file" type="file" accept="image/*" />
      </div>
      <div class="row">
        <div style="flex:1">
          <label for="blur">Blur (px)</label>
          <input id="blur" type="range" min="0" max="6" step="0.5" value="2" />
        </div>
        <div style="flex:1">
          <label for="bright">Brightness</label>
          <input id="bright" type="range" min="0.6" max="1.3" step="0.02" value="1.05" />
        </div>
      </div>
      <div class="row">
        <button id="render" class="btn btn-primary">Render Preview</button>
        <button id="download" class="btn btn-outline">Download JPG</button>
      </div>
    </div>
    <div class="panel">
      <canvas id="cv" width="2000" height="1200" aria-label="Campus preview"></canvas>
    </div>
  </div>

  <script>
    const cv = document.getElementById('cv');
    const ctx = cv.getContext('2d');
    const src = document.getElementById('src');
    const blur = document.getElementById('blur');
    const bright = document.getElementById('bright');
    const renderBtn = document.getElementById('render');
    const dl = document.getElementById('download');
    const fileInput = document.getElementById('file');

    let uploadedURL = '';

    async function render(){
      const img = new Image();
      img.crossOrigin = 'anonymous';
      img.src = uploadedURL || src.value;
      await img.decode().catch(()=>{});
      // background gradient to match site
      const g = ctx.createLinearGradient(0,0,cv.width,cv.height);
      g.addColorStop(0,'#003670'); g.addColorStop(1,'#00A8E8');
      ctx.fillStyle = g; ctx.fillRect(0,0,cv.width,cv.height);
      // draw image center-crop
      const scale = Math.max(cv.width/img.width, cv.height/img.height);
      const w = img.width*scale, h = img.height*scale;
      const x = (cv.width - w)/2, y = (cv.height - h)/2;
      ctx.filter = `blur(${blur.value}px) brightness(${bright.value})`;
      ctx.drawImage(img, x, y, w, h);
      ctx.filter = 'none';
      // subtle vignette
      const vg = ctx.createRadialGradient(cv.width/2, cv.height*0.6, cv.width*0.2, cv.width/2, cv.height*0.6, cv.width*0.8);
      vg.addColorStop(0,'rgba(0,0,0,0)'); vg.addColorStop(1,'rgba(0,0,0,0.35)');
      ctx.fillStyle = vg; ctx.fillRect(0,0,cv.width,cv.height);
    }

    function download(){
      const a = document.createElement('a');
      a.href = cv.toDataURL('image/jpeg', 0.9);
      a.download = 'campus.jpg';
      a.click();
    }

    renderBtn.addEventListener('click', render);
    dl.addEventListener('click', download);
    fileInput.addEventListener('change', ()=>{
      const f = fileInput.files?.[0];
      if(!f) return;
      uploadedURL = URL.createObjectURL(f);
      render();
    });

    window.addEventListener('load', render);
  </script>
</body>
</html>
