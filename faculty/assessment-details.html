<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Assessment Details – Faculty Console</title>
  <link rel="stylesheet" href="../styles.css" />
  <style>
    :root{--bg1:#0b1220;--bg2:#0a1b2e}
    body{margin:0;background:linear-gradient(180deg,var(--bg2),var(--bg1));color:#e7e9f3}
    .wrap{width:min(1160px,96%);margin:0 auto 40px}
    .nav{position:fixed;top:0;left:0;right:0;background:linear-gradient(180deg, rgba(10,20,40,.95), rgba(10,20,40,.85));border-bottom:1px solid rgba(148,163,184,.2);backdrop-filter:blur(10px);z-index:10}
    .nav-inner{max-width:1160px;margin:0 auto;padding:10px 16px;display:flex;align-items:center;justify-content:space-between}
    main{padding-top:76px}
    .card{border:1px solid rgba(148,163,184,.28);border-radius:18px;padding:18px;background:linear-gradient(180deg, rgba(2,6,23,.86), rgba(2,6,23,.72));backdrop-filter:blur(12px);box-shadow:0 24px 60px rgba(2,6,23,.55)}
    .grid{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:12px}
    .muted{color:#94a3b8;font-size:12px}
  </style>
</head>
<body>
  <header class="nav"><div class="nav-inner"><div class="nav-left"><strong>Heema Institute of Technology</strong><div class="nav-sub">Faculty Console</div></div><div class="nav-right"><a class="btn btn-outline" href="assessments.html">← Back</a><button class="btn btn-outline" onclick="Auth.logout()">Logout</button></div></div></header>
  <main class="wrap">
    <section class="card" style="margin-top:14px">
      <h2 style="margin:0 0 6px">Assessment Details</h2>
      <div class="grid">
        <div><div class="muted">Type</div><div id="typ">—</div></div>
        <div><div class="muted">Class</div><div id="cls">—</div></div>
        <div><div class="muted">Course</div><div id="crs">—</div></div>
        <div><div class="muted">Marks</div><div id="mrk">—</div></div>
        <div><div class="muted">Start</div><div id="st">—</div></div>
        <div><div class="muted">Due</div><div id="du">—</div></div>
      </div>
      <div style="margin-top:10px"><div class="muted">Instructions</div><div id="inst">—</div></div>
    </section>
  </main>
  <script>
    const API='http://localhost:4001'; const fid=sessionStorage.getItem('auth_user_id')||''; if((sessionStorage.getItem('auth_role')||'')!=='faculty'){window.location.href='../login.html'}
    const url = new URL(window.location.href); const id = Number(url.searchParams.get('id'));
    function fmt(v){ return v? String(v).replace('T',' ').slice(0,16):'-'; }
    async function load(){
      if(!id){ return; }
      try{
        const r = await fetch(API+`/api/faculty/assessments/${id}`,{headers:{'X-Faculty-Id':fid}});
        const d = await r.json(); if(!r.ok) throw new Error(d.error||'Failed');
        const a = d.assessment;
        document.getElementById('typ').textContent = a.type||'-';
        document.getElementById('cls').textContent = a.class_name||'-';
        document.getElementById('crs').textContent = `${a.course_code||''} ${a.course_name||''}`.trim();
        document.getElementById('mrk').textContent = a.total_marks??'-';
        document.getElementById('st').textContent = fmt(a.start_at);
        document.getElementById('du').textContent = fmt(a.due_at||a.due_date);
        document.getElementById('inst').textContent = a.instructions||'-';
      }catch(e){ /* noop */ }
    }
    load();
  </script>
</body>
</html>
